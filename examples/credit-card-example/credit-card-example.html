<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VGS Collect Credit Card Example</title>

  <!--Replace with generated for your organization JS file.-->
  <script type="text/javascript" src="https://js.verygoodvault.io/vgs-collect/1/<organization-id>.js"></script>

  <style>
    main form,
    form + div {
      display: inline-block;
    }

    form + div {
      margin-left: 20px;
      vertical-align: top;
    }

    span[id*="cc-"] {
      display: block;
      height: 40px;
      width: 300px;
      margin-bottom: 15px;
    }

    span[id*="cc-"] iframe {
      height: 100%;
      width: 100%;
    }
  </style>
</head>
<body>
<main>
  <!--Create credit card form-->
  <form id="cc-form">
    <fieldset>
      <label for="cc-name">Name on card</label>
      <span id="cc-name">
        <!--VGS Collect iframe for card name field will be here!-->
      </span>

      <label for="cc-number">Credit card number</label>
      <span id="cc-number">
        <!--VGS Collect iframe for card number field will be here!-->
      </span>

      <label for="cc-cvc">CVC</label>
      <span id="cc-cvc">
        <!--VGS Collect iframe for CVC field will be here!-->
      </span>

      <label for="cc-expiration-date">Expiration date</label>
      <span id="cc-expiration-date">
        <!--VGS Collect iframe for expiration date field will be here!-->
      </span>
    </fieldset>
    <!--Submit credit card form button-->
    <button type="submit">Submit</button>
  </form>
  <div>
    <p>1. Go back to the VGS Collect tab on a Dashboard and change the library file to your own.</p>
    <p>2. Make sure you initialize form using right environment param.</p>
    <p>3. Proceed to Logs on a Dashboard. Start recording traffic.</p>
    <p>4. Fill in and submit the form.</p>
    <p>5. Open Logs, find your POST request and secure fields that you want to be redacted.</p>
    <p>6. Submit form one more time.</p>
    <p>7. You will see the result here:</p>
    <pre id="result"></pre>
  </div>
</main>

<!--Include script with VGS Collect form initialization-->
<script>
  // VGS Collect form initialization
  const form = VGSCollect.create('<vault-id>', function(state) {});

  // Create VGS Collect field for credit card name
  form.field('#cc-name', {
    type: 'text',
    name: 'card_name',
    placeholder: 'Joe Business',
    validations: ['required'],
  });

  // Create VGS Collect field for credit card number
  form.field('#cc-number', {
    type: 'card-number',
    name: 'card_number',
    successColor: '#4F8A10',
    errorColor: '#D8000C',
    placeholder: '4111 1111 1111 1111',
    validations: ['required', 'validCardNumber'],
  });

  // Create VGS Collect field for CVC
  form.field('#cc-cvc', {
    type: 'card-security-code',
    name: 'card_cvc',
    placeholder: '344',
    validations: ['required', 'validCardSecurityCode'],
  });

  // Create VGS Collect field for credit card expiration date
  form.field('#cc-expiration-date', {
    type: 'card-expiration-date',
    name: 'card_expirationDate',
    placeholder: '01 / 2016',
    validations: ['required', 'validCardExpirationDate']
  });

  // Submits all of the form fields by executing a POST request.
  document.getElementById('cc-form')
    .addEventListener('submit', function(e) {
      e.preventDefault();
      form.submit('/post', {
      }, function(status, data) {
        document.getElementById('result').innerHTML = JSON.stringify(data.json, null, 4);
      });
    }, function (errors) {
      document.getElementById('result').innerHTML = errors;
    });
</script>
</body>
</html>
